<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <title>Document</title>
</head>

<body>
    <div class="conatiner">
        <form id="form">
            <div class="form-group">
                <label>
                    CID
                </label>
                <input id="cid" class="form-control" placeholder="CID" />
                <button type="submit" class="btn btn-primary">
                    Get Files
                </button>
            </div>

        </form>
    </div>
</body>

<script type="module">
    const endpoint = 'https://api.nft.storage' // the default
    const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDMzRGZhRjUzZGI2QTllZjUwQmFkM2U5Qjk1QjBhNDM2RTFhNGM4MzkiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzNTA2MTc2NDM4NiwibmFtZSI6InVwbG9hZC1maWxlcyJ9.IQCtvSGWHmvVBKlz7UkL4xZibh3rJdh--P88bpcNkOY' // your API key from https://nft.storage/manage


    const form = document.getElementById("form");
    form.addEventListener("submit", async (event) => {
        event.preventDefault();
        console.log("Getting Files");
        const cid = document.getElementById('cid').value;
        const response = await fetch(`https://api.nft.storage/${cid}/`, {
            "headers": {
                "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDMzRGZhRjUzZGI2QTllZjUwQmFkM2U5Qjk1QjBhNDM2RTFhNGM4MzkiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzNTA2MTc2NDM4NiwibmFtZSI6InVwbG9hZC1maWxlcyJ9.IQCtvSGWHmvVBKlz7UkL4xZibh3rJdh--P88bpcNkOY",
            },
        })

        const data = await response.json()
        console.log(data.value.files)

    })
</script>

</html>